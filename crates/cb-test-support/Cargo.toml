[package]
name = "cb-test-support"
version = "1.0.0-rc4"
edition = "2021"
publish = false

[dependencies]
tokio = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
tempfile = { workspace = true }
async-trait = { workspace = true }
uuid = { workspace = true }
mockall = { workspace = true }
once_cell = "1.19"
shellexpand = "3.1"
chrono = { version = "0.4", features = ["serde"] }
cb-protocol = { path = "../cb-protocol" }
cb-plugin-api = { path = "../cb-plugin-api" }
cb-handlers = { path = "../cb-handlers" }
cb-services = { path = "../cb-services" }

# Benchmark dependencies (merged from cb-bench)
cb-server = { path = "../cb-server" }
cb-ast = { path = "../cb-ast" }
simd-json = "0.16"
codebuddy-plugin-system = { path = "../codebuddy-plugin-system" }
codebuddy-core = { path = "../codebuddy-core" }
codebuddy-config = { path = "../codebuddy-config" }

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports", "async_tokio"] }

# Benchmarks (merged from cb-bench)
[[bench]]
name = "dispatch_benchmark"
harness = false

[[bench]]
name = "serialization_benchmark"
harness = false

[[bench]]
name = "forwarding_benchmark"
harness = false

[[bench]]
name = "optimization_benchmark"
harness = false
